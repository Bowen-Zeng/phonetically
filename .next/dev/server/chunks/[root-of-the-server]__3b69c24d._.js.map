{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/lib/mongoose.ts"],"sourcesContent":["/**\r\n * Mongoose connection for Phona practice (Sessions, Attempts)\r\n * Uses MONGODB_URI env variable. Hot-reload safe: cache in global to avoid\r\n * multiple connections in Next.js dev.\r\n */\r\nimport mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n  console.warn('MONGODB_URI not set - Phona practice persistence disabled');\r\n}\r\n\r\ndeclare global {\r\n  var _mongooseConn: { conn: typeof mongoose | null; promise: Promise<typeof mongoose> | null } | undefined;\r\n}\r\n\r\nexport async function connectDb(): Promise<typeof mongoose> {\r\n  if (!MONGODB_URI) throw new Error('MONGODB_URI not configured');\r\n  if (!global._mongooseConn) global._mongooseConn = { conn: null, promise: null };\r\n  const cached = global._mongooseConn;\r\n  if (cached.conn) return cached.conn;\r\n  if (!cached.promise) cached.promise = mongoose.connect(MONGODB_URI);\r\n  cached.conn = await cached.promise;\r\n  return cached.conn;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;CAIC,GACD;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,QAAQ,IAAI,CAAC;AACf;AAMO,eAAe;IACpB,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;IAClC,IAAI,CAAC,OAAO,aAAa,EAAE,OAAO,aAAa,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;IAC9E,MAAM,SAAS,OAAO,aAAa;IACnC,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IACnC,IAAI,CAAC,OAAO,OAAO,EAAE,OAAO,OAAO,GAAG,4MAAQ,CAAC,OAAO,CAAC;IACvD,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/lib/models/Session.ts"],"sourcesContent":["/**\r\n * Session model - practice session\r\n * Schema: userId, mode, attemptCount, startedAt, endedAt\r\n */\r\nimport mongoose from 'mongoose';\r\n\r\nconst SessionSchema = new mongoose.Schema(\r\n  {\r\n    userId: { type: String, required: true },\r\n    mode: { type: String, default: 'practice_words' },\r\n    attemptCount: { type: Number, default: 0 },\r\n    startedAt: { type: Date, default: Date.now },\r\n    endedAt: { type: Date, default: null },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.models.Session || mongoose.model('Session', SessionSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GACD;;AAEA,MAAM,gBAAgB,IAAI,4MAAQ,CAAC,MAAM,CACvC;IACE,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,MAAM;QAAE,MAAM;QAAQ,SAAS;IAAiB;IAChD,cAAc;QAAE,MAAM;QAAQ,SAAS;IAAE;IACzC,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;IAC3C,SAAS;QAAE,MAAM;QAAM,SAAS;IAAK;AACvC,GACA;IAAE,YAAY;AAAK;uCAGN,4MAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,4MAAQ,CAAC,KAAK,CAAC,WAAW"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/app/api/sessions/start/route.ts"],"sourcesContent":["/**\r\n * POST /api/sessions/start\r\n * Creates a new practice session, returns sessionId\r\n */\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { connectDb } from '../../../../lib/mongoose';\r\nimport Session from '../../../../lib/models/Session';\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json().catch(() => ({}));\r\n    const userId = body.userId || 'default';\r\n    const mode = body.mode || 'practice_words';\r\n\r\n    await connectDb();\r\n    const session = await Session.create({ userId, mode, attemptCount: 0 });\r\n    return NextResponse.json({ sessionId: session._id.toString() });\r\n  } catch (e) {\r\n    console.error('Session start error:', e);\r\n    return NextResponse.json({ error: 'Failed to start session' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GACD;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACjD,MAAM,SAAS,KAAK,MAAM,IAAI;QAC9B,MAAM,OAAO,KAAK,IAAI,IAAI;QAE1B,MAAM,IAAA,uKAAS;QACf,MAAM,UAAU,MAAM,8KAAO,CAAC,MAAM,CAAC;YAAE;YAAQ;YAAM,cAAc;QAAE;QACrE,OAAO,yLAAY,CAAC,IAAI,CAAC;YAAE,WAAW,QAAQ,GAAG,CAAC,QAAQ;QAAG;IAC/D,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,yLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF"}}]
}