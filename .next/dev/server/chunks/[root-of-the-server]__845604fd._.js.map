{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/lib/mongodb.ts"],"sourcesContent":["/**\r\n * MongoDB connection - uses MONGODB_URI env variable\r\n * Add to .env.local: MONGODB_URI=mongodb+srv://...\r\n */\r\nimport { MongoClient } from 'mongodb';\r\n\r\nconst uri = process.env.MONGODB_URI;\r\nif (!uri) {\r\n  console.warn('MONGODB_URI not set - therapist dashboard will not persist');\r\n}\r\n\r\nlet client: MongoClient | null = null;\r\n\r\nexport async function getDb() {\r\n  if (!uri) throw new Error('MONGODB_URI not configured');\r\n  if (!client) client = new MongoClient(uri);\r\n  await client.connect();\r\n  return client.db();\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GACD;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,IAAI,CAAC,KAAK;IACR,QAAQ,IAAI,CAAC;AACf;AAEA,IAAI,SAA6B;AAE1B,eAAe;IACpB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,IAAI,CAAC,QAAQ,SAAS,IAAI,6MAAW,CAAC;IACtC,MAAM,OAAO,OAAO;IACpB,OAAO,OAAO,EAAE;AAClB"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/app/api/dashboard/recent/route.ts"],"sourcesContent":["/**\r\n * GET /api/dashboard/recent?userId=...\r\n * Returns last 10 attempts sorted by createdAt desc\r\n */\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { getDb } from '../../../../lib/mongodb';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const uid = searchParams.get('userId') || 'default';\r\n\r\n    const db = await getDb();\r\n    const attempts = await db\r\n      .collection('attempts')\r\n      .find({ userId: uid })\r\n      .sort({ createdAt: -1 })\r\n      .limit(10)\r\n      .project({ word: 1, sound: 1, accuracy: 1, createdAt: 1 })\r\n      .toArray();\r\n\r\n    return NextResponse.json(\r\n      attempts.map((a) => ({\r\n        word: a.word,\r\n        sound: a.sound,\r\n        accuracy: a.accuracy,\r\n        createdAt: a.createdAt,\r\n      }))\r\n    );\r\n  } catch (e) {\r\n    if (String(e).includes('MONGODB_URI')) {\r\n      return NextResponse.json([]);\r\n    }\r\n    console.error('Dashboard recent error:', e);\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GACD;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,MAAM,aAAa,GAAG,CAAC,aAAa;QAE1C,MAAM,KAAK,MAAM,IAAA,kKAAK;QACtB,MAAM,WAAW,MAAM,GACpB,UAAU,CAAC,YACX,IAAI,CAAC;YAAE,QAAQ;QAAI,GACnB,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE,GACrB,KAAK,CAAC,IACN,OAAO,CAAC;YAAE,MAAM;YAAG,OAAO;YAAG,UAAU;YAAG,WAAW;QAAE,GACvD,OAAO;QAEV,OAAO,yLAAY,CAAC,IAAI,CACtB,SAAS,GAAG,CAAC,CAAC,IAAM,CAAC;gBACnB,MAAM,EAAE,IAAI;gBACZ,OAAO,EAAE,KAAK;gBACd,UAAU,EAAE,QAAQ;gBACpB,WAAW,EAAE,SAAS;YACxB,CAAC;IAEL,EAAE,OAAO,GAAG;QACV,IAAI,OAAO,GAAG,QAAQ,CAAC,gBAAgB;YACrC,OAAO,yLAAY,CAAC,IAAI,CAAC,EAAE;QAC7B;QACA,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,yLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}