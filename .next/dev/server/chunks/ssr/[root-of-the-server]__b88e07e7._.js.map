{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/app/practice/page.tsx"],"sourcesContent":["/**\r\n * Phona pronunciation practice page (after login)\r\n * Chat-style UI, Web Speech API for speech recognition, accuracy threshold 90%\r\n */\r\n'use client';\r\n\r\nimport { Suspense, useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { Mic, Volume2, Settings2, X } from 'lucide-react';\r\n\r\nconst DEFAULT_PRACTICE_WORDS = ['cat', 'hat', 'bat', 'mat', 'sat', 'red', 'bed', 'led', 'sit', 'hit'];\r\n\r\n/** Word lists per phonetic category (Dashboard → Practice) */\r\nconst SOUND_TO_WORDS: Record<string, string[]> = {\r\n  TH: ['think', 'thumb', 'the', 'that', 'this'],\r\n  R: ['red', 'run', 'car', 'rock', 'rain'],\r\n  S: ['sun', 'sit', 'bus', 'sat', 'see'],\r\n  SH: ['ship', 'shoe', 'fish', 'wash', 'shop'],\r\n  L: ['lip', 'look', 'ball', 'light', 'love'],\r\n  'Short A': ['cat', 'hat', 'bat', 'mat', 'sat'],\r\n  'Short I': ['sit', 'hit', 'pig', 'big', 'win'],\r\n  'Short E': ['red', 'bed', 'led', 'pet', 'net'],\r\n  F: ['fun', 'fish', 'off', 'four', 'fine'],\r\n  V: ['van', 'vine', 'love', 'have', 'very'],\r\n};\r\n\r\nconst WORD_TO_SOUND: Record<string, string> = {\r\n  ...Object.fromEntries(Object.entries(SOUND_TO_WORDS).flatMap(([s, ws]) => ws.map((w) => [w, s]))),\r\n  cat: 'Short A', hat: 'Short A', bat: 'Short A', mat: 'Short A', sat: 'Short A',\r\n  red: 'Short E', bed: 'Short E', led: 'Short E',\r\n  sit: 'Short I', hit: 'Short I',\r\n};\r\n\r\n/** IPA phonetics for practice words */\r\nconst WORD_TO_PHONETICS: Record<string, string> = {\r\n  cat: '/kæt/', hat: '/hæt/', bat: '/bæt/', mat: '/mæt/', sat: '/sæt/',\r\n  red: '/rɛd/', bed: '/bɛd/', led: '/lɛd/', pet: '/pɛt/', net: '/nɛt/',\r\n  sit: '/sɪt/', hit: '/hɪt/', pig: '/pɪɡ/', big: '/bɪɡ/', win: '/wɪn/',\r\n  think: '/θɪŋk/', thumb: '/θʌm/', the: '/ðə/', that: '/ðæt/', this: '/ðɪs/',\r\n  run: '/rʌn/', car: '/kɑr/', rock: '/rɑk/', rain: '/reɪn/',\r\n  sun: '/sʌn/', bus: '/bʌs/', see: '/si/',\r\n  ship: '/ʃɪp/', shoe: '/ʃu/', fish: '/fɪʃ/', wash: '/wɑʃ/', shop: '/ʃɑp/',\r\n  lip: '/lɪp/', look: '/lʊk/', ball: '/bɔl/', light: '/laɪt/', love: '/lʌv/',\r\n  fun: '/fʌn/', off: '/ɔf/', four: '/fɔr/', fine: '/faɪn/',\r\n  van: '/væn/', vine: '/vaɪn/', have: '/hæv/', very: '/ˈvɛri/',\r\n};\r\n\r\nfunction getPhonetics(word: string): string {\r\n  return WORD_TO_PHONETICS[word.toLowerCase()] || '';\r\n}\r\n\r\ntype ChatStep = 'name' | 'mode' | 'practice' | 'word' | 'complete';\r\n\r\nfunction PracticePageContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const soundParam = searchParams.get('sound');\r\n  const isDashboardEntry = !!(soundParam && SOUND_TO_WORDS[soundParam]);\r\n  const [step, setStep] = useState<ChatStep>(isDashboardEntry ? 'word' : 'name');\r\n  const [name, setName] = useState('');\r\n  const [practiceWords, setPracticeWords] = useState<string[]>(\r\n    isDashboardEntry && soundParam ? SOUND_TO_WORDS[soundParam] : DEFAULT_PRACTICE_WORDS\r\n  );\r\n  const [currentSound, setCurrentSound] = useState<string | null>(isDashboardEntry ? soundParam : null);\r\n  const [messages, setMessages] = useState<{ from: 'phona' | 'user'; text: string }[]>([]);\r\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n  const [transcript, setTranscript] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [lastScore, setLastScore] = useState<{ accuracy: number; syllables: string[] } | null>(null);\r\n  const [feedback, setFeedback] = useState<string | null>(null);\r\n  const [sessionId, setSessionId] = useState<string | null>(null);\r\n  const [attemptCount, setAttemptCount] = useState(0);\r\n  const [speechSupport, setSpeechSupport] = useState<boolean | null>(null);\r\n  /** Visible status for diagnostics: Idle | Listening | No speech | Browser unsupported | Mic blocked */\r\n  const [speechStatus, setSpeechStatus] = useState<'idle' | 'listening' | 'no-speech' | 'browser-unsupported' | 'mic-blocked'>('idle');\r\n  // Diagnostic state: Mic Test, Input Level, Debug events\r\n  const [micTestResult, setMicTestResult] = useState<string | null>(null);\r\n  const [inputLevel, setInputLevel] = useState(0);\r\n  const [inputLevelActive, setInputLevelActive] = useState(false);\r\n  const [debugEvents, setDebugEvents] = useState<{ t: string; event: string }[]>([]);\r\n  const [recState, setRecState] = useState<'Idle' | 'Listening' | 'Speech detected' | 'Ended' | 'Error'>('Idle');\r\n  const [lastErrorCode, setLastErrorCode] = useState<string | null>(null);\r\n  const [targetedMessage, setTargetedMessage] = useState<string | null>(null);\r\n  const [audioDevices, setAudioDevices] = useState<string[]>([]);\r\n  const [ttsRate, setTtsRate] = useState<'normal' | 'slow'>('normal');\r\n  const [ttsFallback, setTtsFallback] = useState<string | null>(null);\r\n  const [isDiagnosticsOpen, setIsDiagnosticsOpen] = useState(false);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const analyserRef = useRef<AnalyserNode | null>(null);\r\n  const animationRef = useRef<number | null>(null);\r\n  const speechStartTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n  const noSpeechCountRef = useRef(0);\r\n  // Web Speech API - SpeechRecognition instance (type not in standard lib)\r\n  const recognitionRef = useRef<{ start(): void; stop(): void } | null>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  const addDebugEvent = useCallback((event: string) => {\r\n    const t = new Date().toLocaleTimeString('en-US', { hour12: false });\r\n    setDebugEvents((prev) => [...prev.slice(-9), { t, event }]);\r\n  }, []);\r\n\r\n  const scrollToBottom = () => messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  useEffect(() => { scrollToBottom(); }, [messages]);\r\n\r\n  // Mic Test: getUserMedia (separate from SpeechRecognition) - checks raw mic access\r\n  const runMicTest = useCallback(async () => {\r\n    if (typeof window === 'undefined') return;\r\n    setMicTestResult(null);\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      stream.getTracks().forEach((t) => t.stop());\r\n      setMicTestResult('✅ Mic access OK');\r\n    } catch (err: unknown) {\r\n      const e = err as { name?: string; message?: string };\r\n      setMicTestResult(`❌ ${e.name || 'Error'}: ${e.message || String(err)}. Check Windows mic privacy settings.`);\r\n    }\r\n  }, []);\r\n\r\n  // Input Level Meter: Web Audio API - confirms mic is receiving sound\r\n  const startInputLevelMeter = useCallback(async () => {\r\n    if (typeof window === 'undefined') return;\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      streamRef.current = stream;\r\n      const ctx = new AudioContext();\r\n      const src = ctx.createMediaStreamSource(stream);\r\n      const analyser = ctx.createAnalyser();\r\n      analyser.fftSize = 256;\r\n      analyser.smoothingTimeConstant = 0.5;\r\n      src.connect(analyser);\r\n      analyserRef.current = analyser;\r\n      setInputLevelActive(true);\r\n      const data = new Uint8Array(analyser.frequencyBinCount);\r\n      let peak = 0;\r\n      const tick = () => {\r\n        if (!analyserRef.current) return;\r\n        analyserRef.current.getByteFrequencyData(data);\r\n        const avg = data.reduce((a, b) => a + b, 0) / data.length;\r\n        peak = Math.max(peak * 0.9, avg);\r\n        setInputLevel(Math.round(peak));\r\n        animationRef.current = requestAnimationFrame(tick);\r\n      };\r\n      tick();\r\n    } catch (err: unknown) {\r\n      const e = err as { name?: string; message?: string };\r\n      setMicTestResult(`❌ ${e.name || 'Error'}: ${e.message || String(err)}`);\r\n    }\r\n  }, []);\r\n  const stopInputLevelMeter = useCallback(() => {\r\n    if (animationRef.current) cancelAnimationFrame(animationRef.current);\r\n    streamRef.current?.getTracks().forEach((t) => t.stop());\r\n    streamRef.current = null;\r\n    analyserRef.current = null;\r\n    setInputLevelActive(false);\r\n    setInputLevel(0);\r\n  }, []);\r\n  useEffect(() => () => stopInputLevelMeter(), [stopInputLevelMeter]);\r\n\r\n  // Persist diagnostics open state to localStorage\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('phona-diagnostics-open', String(isDiagnosticsOpen));\r\n    } catch { /* ignore */ }\r\n  }, [isDiagnosticsOpen]);\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    try {\r\n      if (localStorage.getItem('phona-diagnostics-open') === 'true') setIsDiagnosticsOpen(true);\r\n    } catch { /* ignore */ }\r\n  }, []);\r\n\r\n  // Enumerate audio input devices (optional) - lists what browser detects\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || !navigator.mediaDevices?.enumerateDevices) return;\r\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\r\n      const inputs = devices.filter((d) => d.kind === 'audioinput').map((d) => d.label || d.deviceId.slice(0, 8));\r\n      setAudioDevices(inputs);\r\n    });\r\n  }, []);\r\n\r\n  // Browser support check: only run on client (typeof window)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const SpeechRecognition =\r\n      (window as unknown as { SpeechRecognition?: new () => SpeechRecognition }).SpeechRecognition ||\r\n      (window as unknown as { webkitSpeechRecognition?: new () => SpeechRecognition }).webkitSpeechRecognition;\r\n    if (SpeechRecognition) {\r\n      setSpeechSupport(true);\r\n      setSpeechStatus('idle');\r\n    } else {\r\n      setSpeechSupport(false);\r\n      setSpeechStatus('browser-unsupported');\r\n      setTargetedMessage('Browser unsupported (use desktop Edge/Chrome).');\r\n    }\r\n  }, []);\r\n\r\n  const speakPhona = useCallback(async (text: string) => {\r\n    setMessages((m) => [...m, { from: 'phona', text }]);\r\n    try {\r\n      const res = await fetch('/api/speak', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ text }),\r\n      });\r\n      if (res.ok) {\r\n        const blob = await res.blob();\r\n        const url = URL.createObjectURL(blob);\r\n        const audio = new Audio(url);\r\n        await new Promise<void>((resolve, reject) => {\r\n          audio.onended = () => {\r\n            URL.revokeObjectURL(url);\r\n            resolve();\r\n          };\r\n          audio.onerror = () => reject(new Error('Playback failed'));\r\n          audio.play();\r\n        });\r\n      }\r\n    } catch {\r\n      // Fallback: no audio\r\n    }\r\n  }, []);\r\n\r\n  // Dashboard → Practice: start session, load name, reset attemptCount\r\n  const dashboardBypassDone = useRef(false);\r\n  useEffect(() => {\r\n    if (!isDashboardEntry || dashboardBypassDone.current) return;\r\n    dashboardBypassDone.current = true;\r\n    setAttemptCount(0);\r\n    setCurrentWordIndex(0);\r\n    try {\r\n      const savedName = localStorage.getItem('phona-user-name');\r\n      if (savedName) setName(savedName);\r\n    } catch { /* ignore */ }\r\n    (async () => {\r\n      try {\r\n        const res = await fetch('/api/sessions/start', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ userId: getUserId(), mode: 'practice_words' }),\r\n        });\r\n        const data = await res.json();\r\n        if (data.sessionId) setSessionId(data.sessionId);\r\n      } catch (e) {\r\n        console.error('Session start failed', e);\r\n      }\r\n    })();\r\n  }, [isDashboardEntry]);\r\n\r\n  const [isIntroAnimating, setIsIntroAnimating] = useState(true);\r\n  const [isAwaitingName, setIsAwaitingName] = useState(false);\r\n  const introCompletedRef = useRef(false);\r\n  const nameSubmittedRef = useRef(false);\r\n  useEffect(() => {\r\n    if (introCompletedRef.current) return;\r\n    if (isDashboardEntry) {\r\n      introCompletedRef.current = true;\r\n      setIsIntroAnimating(false);\r\n      return;\r\n    }\r\n    const t = setTimeout(() => {\r\n      introCompletedRef.current = true;\r\n      setIsIntroAnimating(false);\r\n      setIsAwaitingName(true);\r\n      speakPhona(\"Hi, I'm Phona your phonetic speech assistant. It's nice to meet you! Before we get started what's your name?\");\r\n    }, 600);\r\n    return () => clearTimeout(t);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- run once; Strict Mode may double-invoke but timeout survives\r\n  }, []);\r\n\r\n  const handleNameSubmit = () => {\r\n    if (nameSubmittedRef.current) return;\r\n    nameSubmittedRef.current = true;\r\n    const n = name.trim() || 'there';\r\n    setName(n);\r\n    setIsIntroAnimating(false);\r\n    setIsAwaitingName(false);\r\n    try { localStorage.setItem('phona-user-name', n); } catch { /* ignore */ }\r\n    setMessages((m) => [...m, { from: 'user', text: n }, { from: 'phona', text: \"Okay! Are you ready to start a tutorial?\" }]);\r\n    speakPhona(\"Okay! Are you ready to start a tutorial?\");\r\n    setStep('mode');\r\n  };\r\n\r\n  const handleContinueTutorial = async () => {\r\n    setMessages((m) => [...m, { from: 'user', text: 'Continue with tutorial' }]);\r\n    setPracticeWords(DEFAULT_PRACTICE_WORDS);\r\n    setCurrentSound(null);\r\n    await startSession();\r\n    speakPhona(`Nice to meet you ${name || 'there'}! Let's start practicing some phonetics.`);\r\n    setStep('word');\r\n  };\r\n\r\n  const handleSkipTutorial = () => {\r\n    setMessages((m) => [...m, { from: 'user', text: 'Skip' }]);\r\n    router.push('/dashboard');\r\n  };\r\n\r\n  const getUserId = () => {\r\n    if (typeof window === 'undefined') return 'default';\r\n    try {\r\n      let uid = localStorage.getItem('phona-user-id');\r\n      if (!uid) {\r\n        uid = 'user-' + Math.random().toString(36).slice(2, 10);\r\n        localStorage.setItem('phona-user-id', uid);\r\n      }\r\n      return uid;\r\n    } catch { return 'default'; }\r\n  };\r\n\r\n  const startSession = async () => {\r\n    try {\r\n      const res = await fetch('/api/sessions/start', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: getUserId(), mode: 'practice_words' }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.sessionId) {\r\n        setSessionId(data.sessionId);\r\n        setAttemptCount(0);\r\n      }\r\n    } catch (e) {\r\n      console.error('Session start failed', e);\r\n    }\r\n  };\r\n\r\n  const scoreAndAdvance = useCallback(\r\n    async (word: string, trans: string) => {\r\n      const res = await fetch('/api/practice/score', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          word,\r\n          transcript: trans,\r\n          sessionId: sessionId || undefined,\r\n          userId: getUserId(),\r\n          sound: WORD_TO_SOUND[word] || null,\r\n          phonetics: getPhonetics(word) || null,\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      const count = data.attemptCount ?? attemptCount + 1;\r\n      setAttemptCount(count);\r\n      setLastScore({ accuracy: data.accuracy, syllables: data.syllables || [] });\r\n\r\n      if (count >= 3) {\r\n        if (sessionId) {\r\n          await fetch('/api/sessions/end', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ sessionId }),\r\n          });\r\n        }\r\n        await speakPhona(`Great job, ${name || 'there'}! You completed the tutorial.`);\r\n        setStep('complete');\r\n        return;\r\n      }\r\n\r\n      if (data.accuracy >= 90) {\r\n        setFeedback('✅ Nice!');\r\n        await speakPhona('Nice!');\r\n        setLastScore(null);\r\n        setTranscript('');\r\n        if (currentWordIndex < practiceWords.length - 1) {\r\n          setCurrentWordIndex((i) => i + 1);\r\n          setTimeout(() => setFeedback(null), 1200);\r\n        } else {\r\n          setFeedback(\"You've completed all the words! Great job.\");\r\n          if (sessionId) {\r\n            await fetch('/api/sessions/end', {\r\n              method: 'POST',\r\n              headers: { 'Content-Type': 'application/json' },\r\n              body: JSON.stringify({ sessionId }),\r\n            });\r\n          }\r\n        }\r\n      } else if (data.tooNoisy) {\r\n        const txt = \"It seems too noisy here. Please try moving somewhere quieter.\";\r\n        setFeedback(txt);\r\n        setTargetedMessage(txt);\r\n        await speakPhona(txt);\r\n      } else {\r\n        const syll = (data.syllables || []).join(' - ');\r\n        const txt = `Almost! Let's try it in syllables: ${syll}`;\r\n        setFeedback(txt);\r\n        await speakPhona(txt);\r\n      }\r\n    },\r\n    [sessionId, currentWordIndex, speakPhona, attemptCount, name, router, currentSound]\r\n  );\r\n\r\n  // Web Speech API: ONLY called from user button click. Client-only (guarded).\r\n  const startListening = useCallback(async () => {\r\n    if (typeof window === 'undefined' || !speechSupport) return;\r\n\r\n    setLastErrorCode(null);\r\n    setTargetedMessage(null);\r\n\r\n    // Microphone permission check (Permissions API - not all browsers support)\r\n    if (navigator.permissions?.query) {\r\n      try {\r\n        const perm = await navigator.permissions.query({ name: 'microphone' as PermissionName });\r\n        if (perm.state === 'denied') {\r\n          setSpeechStatus('mic-blocked');\r\n          setTargetedMessage('Mic blocked or recognition not triggered by a user gesture.');\r\n          return;\r\n        }\r\n      } catch {\r\n        // Permissions API may not support 'microphone' - continue anyway\r\n      }\r\n    }\r\n\r\n    const SpeechRecognition =\r\n      (window as unknown as { SpeechRecognition?: new () => SpeechRecognition }).SpeechRecognition ||\r\n      (window as unknown as { webkitSpeechRecognition?: new () => SpeechRecognition }).webkitSpeechRecognition;\r\n    if (!SpeechRecognition) {\r\n      setTargetedMessage('Browser unsupported (use desktop Edge/Chrome).');\r\n      return;\r\n    }\r\n\r\n    const rec = new SpeechRecognition();\r\n    rec.lang = 'en-US';\r\n    rec.interimResults = true;\r\n    rec.continuous = false;\r\n    rec.maxAlternatives = 3;\r\n\r\n    setTranscript('');\r\n    setFeedback(null);\r\n    setSpeechStatus('listening');\r\n    setRecState('Listening');\r\n\r\n    // ~5s timeout: if no onspeechstart, suggest mic/volume or noise\r\n    speechStartTimeoutRef.current = setTimeout(() => {\r\n      setRecState((s) => {\r\n        if (s === 'Listening') {\r\n          noSpeechCountRef.current += 1;\r\n          const count = noSpeechCountRef.current;\r\n          if (count >= 2) {\r\n            setTargetedMessage('It seems too noisy here. Please try moving somewhere quieter, then tap Speak again.');\r\n          } else {\r\n            setTargetedMessage('No speech detected. Try speaking right after you tap Speak. If it\\'s noisy, move somewhere quieter.');\r\n          }\r\n          setSpeechStatus('no-speech');\r\n          return 'Error';\r\n        }\r\n        return s;\r\n      });\r\n    }, 5000);\r\n\r\n    rec.onstart = () => {\r\n      addDebugEvent('onstart');\r\n      console.log('[SpeechRecognition] Listening started');\r\n    };\r\n    rec.onaudiostart = () => {\r\n      addDebugEvent('onaudiostart');\r\n      if (speechStartTimeoutRef.current) {\r\n        clearTimeout(speechStartTimeoutRef.current);\r\n        speechStartTimeoutRef.current = null;\r\n      }\r\n    };\r\n    rec.onspeechstart = () => {\r\n      addDebugEvent('onspeechstart');\r\n      if (speechStartTimeoutRef.current) {\r\n        clearTimeout(speechStartTimeoutRef.current);\r\n        speechStartTimeoutRef.current = null;\r\n      }\r\n      setRecState('Speech detected');\r\n    };\r\n    rec.onspeechend = () => {\r\n      addDebugEvent('onspeechend');\r\n    };\r\n    rec.onresult = (e: SpeechRecognitionEvent) => {\r\n      addDebugEvent('onresult');\r\n      noSpeechCountRef.current = 0; // Reset on successful recognition\r\n      if (!e.results.length) return;\r\n      // With interimResults, take the last final result\r\n      let text = '';\r\n      for (let i = e.results.length - 1; i >= 0; i--) {\r\n        if (e.results[i].isFinal) {\r\n          text = e.results[i][0]?.transcript?.trim() || '';\r\n          break;\r\n        }\r\n      }\r\n      if (!text) text = e.results[0][0]?.transcript?.trim() || '';\r\n      if (!text) return;\r\n      setTranscript(text);\r\n      setSpeechStatus('idle');\r\n      setRecState('Ended');\r\n      const word = practiceWords[currentWordIndex];\r\n      scoreAndAdvance(word, text);\r\n    };\r\n    rec.onend = () => {\r\n      addDebugEvent('onend');\r\n      if (speechStartTimeoutRef.current) {\r\n        clearTimeout(speechStartTimeoutRef.current);\r\n        speechStartTimeoutRef.current = null;\r\n      }\r\n      setIsListening(false);\r\n      recognitionRef.current = null;\r\n      setRecState((s) => (s === 'Listening' ? 'Ended' : s));\r\n      setSpeechStatus((s) => (s === 'listening' ? 'idle' : s));\r\n    };\r\n    rec.onerror = (e: Event & { error?: string }) => {\r\n      const err = (e as { error?: string }).error;\r\n      addDebugEvent(`onerror: ${err || 'unknown'}`);\r\n      setLastErrorCode(err || 'unknown');\r\n      console.error('[SpeechRecognition] Error:', err, (e as ErrorEvent).message || '');\r\n      setIsListening(false);\r\n      recognitionRef.current = null;\r\n      setRecState('Error');\r\n      if (err === 'not-allowed') {\r\n        setSpeechStatus('mic-blocked');\r\n        setTargetedMessage('Mic blocked or recognition not triggered by a user gesture.');\r\n      } else if (err === 'network' || err === 'service-not-allowed') {\r\n        setTargetedMessage('Speech recognition requires internet; firewall/VPN may block it.');\r\n      } else if (err === 'no-speech') {\r\n        setSpeechStatus('no-speech');\r\n        setTargetedMessage('No speech detected. Try speaking right after you tap Speak, increase mic volume, or switch to a different microphone.');\r\n      } else if (err !== 'aborted') {\r\n        setSpeechStatus('idle');\r\n        setTargetedMessage('Could not hear clearly. Try again. If it\\'s noisy, move somewhere quieter.');\r\n      }\r\n    };\r\n\r\n    recognitionRef.current = rec;\r\n    // recognition.start() ONLY triggered by user click (this fn is button handler)\r\n    rec.start();\r\n    setIsListening(true);\r\n  }, [currentWordIndex, practiceWords, speechSupport, scoreAndAdvance, addDebugEvent]);\r\n\r\n  const stopListening = () => {\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n      recognitionRef.current = null;\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setLastScore(null);\r\n    setFeedback(null);\r\n    setTranscript('');\r\n    setSpeechStatus('idle');\r\n    startListening();\r\n  };\r\n\r\n  // Play word: browser TTS (speechSynthesis) - hear target word pronounced\r\n  const playWord = useCallback((word: string) => {\r\n    if (typeof window === 'undefined') return;\r\n    if (!window.speechSynthesis) {\r\n      setTtsFallback('Text-to-speech is not supported in this browser.');\r\n      return;\r\n    }\r\n    setTtsFallback(null);\r\n    window.speechSynthesis.cancel();\r\n    const u = new SpeechSynthesisUtterance(word);\r\n    u.lang = 'en-US';\r\n    u.rate = ttsRate === 'slow' ? 0.7 : 1;\r\n    const voices = window.speechSynthesis.getVoices();\r\n    const enVoice = voices.find((v) => v.lang.startsWith('en') && v.name.toLowerCase().includes('female'))\r\n      || voices.find((v) => v.lang.startsWith('en'))\r\n      || voices[0];\r\n    if (enVoice) u.voice = enVoice;\r\n    window.speechSynthesis.speak(u);\r\n  }, [ttsRate]);\r\n\r\n  // Load voices (Chrome needs this to populate getVoices)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || !window.speechSynthesis) return;\r\n    const load = () => window.speechSynthesis.getVoices();\r\n    load();\r\n    window.speechSynthesis.onvoiceschanged = load;\r\n  }, []);\r\n\r\n  const currentWord = practiceWords[currentWordIndex];\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <div className=\"phona-header\">\r\n          <Link href=\"/\" className=\"phona-logo-link\" aria-label=\"Back to Home\">\r\n            <Image src=\"/phoneticallylogo.png\" alt=\"Phonetically\" width={96} height={96} className=\"phona-header-logo\" priority />\r\n          </Link>\r\n          {step === 'word' ? (\r\n            <div className=\"phona-tutorial-progress-wrap phona-header-progress\">\r\n              <div className=\"phona-tutorial-progress-bar\">\r\n                <div\r\n                  className=\"phona-tutorial-progress-fill\"\r\n                  style={{ width: `${Math.min(100, (attemptCount / 3) * 100)}%` }}\r\n                />\r\n              </div>\r\n              <span className=\"phona-tutorial-progress-label\">{attemptCount}/3</span>\r\n            </div>\r\n          ) : (\r\n            <div />\r\n          )}\r\n        </div>\r\n        <div className=\"app-content-scroll phona-practice-fixed\">\r\n          <div className=\"content-wrapper max-w-2xl mx-auto w-full p-8\">\r\n\r\n            <div className={step === 'word' || step === 'complete' ? 'phona-fresh-container' : 'phona-chat'}>\r\n            {step !== 'word' && step !== 'complete' && messages\r\n              .filter((msg, i) => !(i > 0 && msg.from === messages[i - 1].from && msg.text === messages[i - 1].text))\r\n              .map((msg, i) => (\r\n              <div\r\n                key={i}\r\n                className={`phona-message-wrap ${msg.from === 'phona' ? 'phona-message-wrap-bot' : 'phona-message-wrap-user'}`}\r\n              >\r\n                {msg.from === 'phona' && (\r\n                  <div className=\"phona-avatar\" aria-hidden>\r\n                    <Image src=\"/phoneticallylogo.png\" alt=\"\" width={36} height={36} />\r\n                  </div>\r\n                )}\r\n                <div\r\n                  className={`phona-message phona-message-enter ${msg.from === 'phona' ? 'phona-message-bot' : 'phona-message-user'}`}\r\n                >\r\n                  {msg.text}\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            {step === 'name' && isIntroAnimating && (\r\n              <div className=\"phona-message-wrap phona-message-wrap-bot\">\r\n                <div className=\"phona-avatar\" aria-hidden>\r\n                  <Image src=\"/phoneticallylogo.png\" alt=\"\" width={36} height={36} />\r\n                </div>\r\n                <div className=\"phona-typing-indicator\">\r\n                  <span className=\"phona-typing-dot\" />\r\n                  <span className=\"phona-typing-dot\" />\r\n                  <span className=\"phona-typing-dot\" />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {step === 'name' && isAwaitingName && (\r\n              <div className=\"phona-input-section\">\r\n                <div className=\"phona-input-row\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Your name\"\r\n                    className=\"glass-input phona-input\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    onKeyDown={(e) => e.key === 'Enter' && handleNameSubmit()}\r\n                  />\r\n                  <button type=\"button\" onClick={handleNameSubmit} className=\"glass-button phona-send\" aria-label=\"Send\">\r\n                    Send\r\n                  </button>\r\n                </div>\r\n                <p className=\"phona-input-hint\">Enter your name to get started</p>\r\n              </div>\r\n            )}\r\n\r\n            {step === 'mode' && (\r\n              <div className=\"phona-tutorial-options\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleContinueTutorial}\r\n                    className=\"glass-button phona-option-btn phona-option-primary\"\r\n                  >\r\n                    Continue with tutorial\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleSkipTutorial}\r\n                    className=\"glass-button phona-option-btn phona-option-secondary\"\r\n                  >\r\n                  Skip\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {step === 'complete' && (\r\n              <div className=\"phona-complete-view\">\r\n                <div className=\"phona-complete-message\">\r\n                  <h2 className=\"phona-complete-title\">Great job, {name || 'there'}!</h2>\r\n                  <p className=\"phona-complete-subtitle\">\r\n                    You completed the voice tutorial. Head to your dashboard to pick sounds and keep practicing.\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => router.push('/dashboard')}\r\n                  className=\"glass-button phona-continue-btn\"\r\n                >\r\n                  Continue to Dashboard\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {step === 'word' && currentWord && (\r\n              <div className=\"phona-fresh-view\">\r\n                <div className=\"phona-target-row\">\r\n                  <div className=\"phona-target-word-wrap\">\r\n                    <div className=\"phona-target-word-center\">{currentWord}</div>\r\n                    {getPhonetics(currentWord) && (\r\n                      <div className=\"phona-target-phonetics\">{getPhonetics(currentWord)}</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"phona-play-section\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => playWord(currentWord)}\r\n                      className=\"glass-button phona-play-btn\"\r\n                      title=\"Hear the word\"\r\n                    >\r\n                      <Volume2 size={24} />\r\n                      Play\r\n                    </button>\r\n                    <div className=\"phona-rate-toggle\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setTtsRate('normal')}\r\n                        className={`phona-rate-btn ${ttsRate === 'normal' ? 'phona-rate-active' : ''}`}\r\n                      >\r\n                        Normal\r\n                      </button>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setTtsRate('slow')}\r\n                        className={`phona-rate-btn ${ttsRate === 'slow' ? 'phona-rate-active' : ''}`}\r\n                      >\r\n                        Slow\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {ttsFallback && <div className=\"phona-tts-fallback\">{ttsFallback}</div>}\r\n                {/* Practice Zone: status (Idle, Listening, etc.) on top, feedback below */}\r\n                {(() => {\r\n                  const statusText =\r\n                    speechStatus === 'browser-unsupported'\r\n                      ? 'Speech recognition is not supported in this browser. Please use Chrome or Edge.'\r\n                      : speechStatus === 'mic-blocked'\r\n                        ? 'Microphone access is blocked. Please enable it in browser settings.'\r\n                        : speechStatus === 'no-speech'\r\n                          ? 'No speech detected'\r\n                          : recState === 'Speech detected'\r\n                            ? 'Speech detected'\r\n                            : speechStatus === 'listening'\r\n                              ? 'Listening...'\r\n                              : recState === 'Error'\r\n                                ? 'Error'\r\n                                : 'Idle';\r\n                  const statusVariant = recState === 'Speech detected'\r\n                    ? 'success'\r\n                    : speechStatus === 'listening'\r\n                      ? 'listening'\r\n                      : (speechStatus === 'no-speech' || speechStatus === 'browser-unsupported' || speechStatus === 'mic-blocked' || recState === 'Error')\r\n                        ? 'error'\r\n                        : 'idle';\r\n                  return (\r\n                    <div className=\"phona-status-wrap\" role=\"status\" aria-live=\"polite\">\r\n                      <div className={`phona-status phona-status-${statusVariant}`}>{statusText}</div>\r\n                      {feedback && <div className=\"phona-feedback\">{feedback}</div>}\r\n                    </div>\r\n                  );\r\n                })()}\r\n\r\n                {speechSupport !== false && (\r\n                  <>\r\n                    <div className=\"phona-speak-tip\">Tip: Tap Speak and start talking right away.</div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={isListening ? stopListening : startListening}\r\n                      className={`phona-mic-large ${isListening ? 'phona-mic-listening' : ''}`}\r\n                    >\r\n                      <Mic size={36} strokeWidth={2} />\r\n                      <span className=\"phona-mic-label\">Speak</span>\r\n                    </button>\r\n                  </>\r\n                )}\r\n\r\n                {lastScore && lastScore.accuracy < 90 && (\r\n                  <button type=\"button\" onClick={handleRetry} className=\"glass-button phona-retry\">\r\n                    Try again\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Floating Diagnostics: toggle button + expandable panel (only on practice step) */}\r\n            {step === 'word' && (\r\n              <div className=\"phona-diagnostics-float\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setIsDiagnosticsOpen((o) => !o)}\r\n                  className={`phona-diagnostics-toggle ${isDiagnosticsOpen ? 'phona-diagnostics-toggle-open' : ''}`}\r\n                >\r\n                  <Settings2 size={18} />\r\n                  Diagnostics\r\n                </button>\r\n                <div className={`phona-diagnostics-panel ${isDiagnosticsOpen ? 'phona-diagnostics-panel-open' : ''}`}>\r\n                  <div className=\"phona-diagnostics-header-row\">\r\n                    <span className=\"phona-diagnostics-header\">Speech Diagnostics</span>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setIsDiagnosticsOpen(false)}\r\n                      className=\"phona-diagnostics-close\"\r\n                      aria-label=\"Close\"\r\n                    >\r\n                      <X size={18} />\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"phona-diagnostics-body\">\r\n                    <div className=\"phona-diagnostic-row\">\r\n                      <button type=\"button\" onClick={runMicTest} className=\"glass-button phona-diagnostic-btn\">\r\n                        Mic Test\r\n                      </button>\r\n                      {micTestResult && <span className=\"phona-diagnostic-result\">{micTestResult}</span>}\r\n                    </div>\r\n                    <div className=\"phona-diagnostic-row\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={inputLevelActive ? stopInputLevelMeter : startInputLevelMeter}\r\n                        className=\"glass-button phona-diagnostic-btn\"\r\n                      >\r\n                        {inputLevelActive ? 'Stop Meter' : 'Input Level Meter'}\r\n                      </button>\r\n                      {inputLevelActive && (\r\n                        <>\r\n                          <div className=\"phona-level-bar\">\r\n                            <div className=\"phona-level-fill\" style={{ width: `${Math.min(100, inputLevel * 2)}%` }} />\r\n                          </div>\r\n                          <span className=\"phona-level-value\">{inputLevel}</span>\r\n                          {inputLevel < 5 && (\r\n                            <span className=\"phona-diagnostic-warn\">Mic not receiving audio—check input device.</span>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"phona-debug-panel\">\r\n                      <div className=\"phona-debug-row\">\r\n                        <span className=\"phona-debug-label\">Status:</span>\r\n                        <span className=\"phona-debug-value\">{recState}</span>\r\n                      </div>\r\n                      {lastErrorCode && (\r\n                        <div className=\"phona-debug-row\">\r\n                          <span className=\"phona-debug-label\">Last issue:</span>\r\n                          <span className=\"phona-debug-value phona-debug-error\">{lastErrorCode}</span>\r\n                        </div>\r\n                      )}\r\n                      {targetedMessage && <div className=\"phona-targeted-msg\">{targetedMessage}</div>}\r\n                      <div className=\"phona-debug-events\">\r\n                        {debugEvents.slice(-10).map((ev, i) => (\r\n                          <div key={i} className=\"phona-debug-event\">[{ev.t}] {ev.event}</div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"phona-device-guidance\">\r\n                      <strong>Mic selection:</strong> Edge address bar → lock icon → Site permissions → Microphone. Or Windows Settings → Sound → Input device.\r\n                      {audioDevices.length > 0 && (\r\n                        <div className=\"phona-device-list\">Detected inputs: {audioDevices.join(', ') || 'none'}</div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"phona-interpret-note\">\r\n                      <strong>How to interpret:</strong>\r\n                      <ul className=\"phona-interpret-list\">\r\n                        <li>Mic Test fails → microphone permissions or Windows privacy settings</li>\r\n                        <li>Meter moves but no speech events → SpeechRecognition service/network may be blocked</li>\r\n                        <li>Meter flat → wrong input device or muted mic</li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div ref={messagesEndRef} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function PracticePage() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"app-container\">\r\n        <div className=\"phona-header\">\r\n          <Link href=\"/\" className=\"phona-logo-link\" aria-label=\"Back to Home\">\r\n            <Image src=\"/phoneticallylogo.png\" alt=\"Phonetically\" width={96} height={96} className=\"phona-header-logo\" priority />\r\n          </Link>\r\n          <div />\r\n        </div>\r\n        <div className=\"app-content-scroll phona-practice-fixed\">\r\n          <div className=\"content-wrapper max-w-2xl mx-auto w-full p-8\">\r\n            <p className=\"text-white/60\">Loading...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    }>\r\n      <PracticePageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}