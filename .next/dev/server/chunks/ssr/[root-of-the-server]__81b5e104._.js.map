{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/10099/OneDrive/Documents/phonetically/app/practice/page.tsx"],"sourcesContent":["/**\r\n * Phona pronunciation practice page (after login)\r\n * Chat-style UI, Web Speech API for speech recognition, accuracy threshold 90%\r\n */\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { Mic, Volume2, Settings2, X } from 'lucide-react';\r\n\r\nconst PRACTICE_WORDS = ['cat', 'hat', 'bat', 'mat', 'sat', 'red', 'bed', 'led', 'sit', 'hit'];\r\n\r\nconst WORD_TO_SOUND: Record<string, string> = {\r\n  cat: 'Short A', hat: 'Short A', bat: 'Short A', mat: 'Short A', sat: 'Short A',\r\n  red: 'Short E', bed: 'Short E', led: 'Short E',\r\n  sit: 'Short I', hit: 'Short I',\r\n};\r\n\r\ntype ChatStep = 'name' | 'mode' | 'practice' | 'word';\r\n\r\nexport default function PracticePage() {\r\n  const [step, setStep] = useState<ChatStep>('name');\r\n  const [name, setName] = useState('');\r\n  const [messages, setMessages] = useState<{ from: 'phona' | 'user'; text: string }[]>([]);\r\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n  const [transcript, setTranscript] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [lastScore, setLastScore] = useState<{ accuracy: number; syllables: string[] } | null>(null);\r\n  const [feedback, setFeedback] = useState<string | null>(null);\r\n  const [sessionId, setSessionId] = useState<string | null>(null);\r\n  const [attemptCount, setAttemptCount] = useState(0);\r\n  const [speechSupport, setSpeechSupport] = useState<boolean | null>(null);\r\n  /** Visible status for diagnostics: Idle | Listening | No speech | Browser unsupported | Mic blocked */\r\n  const [speechStatus, setSpeechStatus] = useState<'idle' | 'listening' | 'no-speech' | 'browser-unsupported' | 'mic-blocked'>('idle');\r\n  // Diagnostic state: Mic Test, Input Level, Debug events\r\n  const [micTestResult, setMicTestResult] = useState<string | null>(null);\r\n  const [inputLevel, setInputLevel] = useState(0);\r\n  const [inputLevelActive, setInputLevelActive] = useState(false);\r\n  const [debugEvents, setDebugEvents] = useState<{ t: string; event: string }[]>([]);\r\n  const [recState, setRecState] = useState<'Idle' | 'Listening' | 'Speech detected' | 'Ended' | 'Error'>('Idle');\r\n  const [lastErrorCode, setLastErrorCode] = useState<string | null>(null);\r\n  const [targetedMessage, setTargetedMessage] = useState<string | null>(null);\r\n  const [audioDevices, setAudioDevices] = useState<string[]>([]);\r\n  const [ttsRate, setTtsRate] = useState<'normal' | 'slow'>('normal');\r\n  const [ttsFallback, setTtsFallback] = useState<string | null>(null);\r\n  const [isDiagnosticsOpen, setIsDiagnosticsOpen] = useState(false);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const analyserRef = useRef<AnalyserNode | null>(null);\r\n  const animationRef = useRef<number | null>(null);\r\n  const speechStartTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n  // Web Speech API - SpeechRecognition instance (type not in standard lib)\r\n  const recognitionRef = useRef<{ start(): void; stop(): void } | null>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  const addDebugEvent = useCallback((event: string) => {\r\n    const t = new Date().toLocaleTimeString('en-US', { hour12: false });\r\n    setDebugEvents((prev) => [...prev.slice(-9), { t, event }]);\r\n  }, []);\r\n\r\n  const scrollToBottom = () => messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  useEffect(() => { scrollToBottom(); }, [messages]);\r\n\r\n  // Mic Test: getUserMedia (separate from SpeechRecognition) - checks raw mic access\r\n  const runMicTest = useCallback(async () => {\r\n    if (typeof window === 'undefined') return;\r\n    setMicTestResult(null);\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      stream.getTracks().forEach((t) => t.stop());\r\n      setMicTestResult('✅ Mic access OK');\r\n    } catch (err: unknown) {\r\n      const e = err as { name?: string; message?: string };\r\n      setMicTestResult(`❌ ${e.name || 'Error'}: ${e.message || String(err)}. Check Windows mic privacy settings.`);\r\n    }\r\n  }, []);\r\n\r\n  // Input Level Meter: Web Audio API - confirms mic is receiving sound\r\n  const startInputLevelMeter = useCallback(async () => {\r\n    if (typeof window === 'undefined') return;\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      streamRef.current = stream;\r\n      const ctx = new AudioContext();\r\n      const src = ctx.createMediaStreamSource(stream);\r\n      const analyser = ctx.createAnalyser();\r\n      analyser.fftSize = 256;\r\n      analyser.smoothingTimeConstant = 0.5;\r\n      src.connect(analyser);\r\n      analyserRef.current = analyser;\r\n      setInputLevelActive(true);\r\n      const data = new Uint8Array(analyser.frequencyBinCount);\r\n      let peak = 0;\r\n      const tick = () => {\r\n        if (!analyserRef.current) return;\r\n        analyserRef.current.getByteFrequencyData(data);\r\n        const avg = data.reduce((a, b) => a + b, 0) / data.length;\r\n        peak = Math.max(peak * 0.9, avg);\r\n        setInputLevel(Math.round(peak));\r\n        animationRef.current = requestAnimationFrame(tick);\r\n      };\r\n      tick();\r\n    } catch (err: unknown) {\r\n      const e = err as { name?: string; message?: string };\r\n      setMicTestResult(`❌ ${e.name || 'Error'}: ${e.message || String(err)}`);\r\n    }\r\n  }, []);\r\n  const stopInputLevelMeter = useCallback(() => {\r\n    if (animationRef.current) cancelAnimationFrame(animationRef.current);\r\n    streamRef.current?.getTracks().forEach((t) => t.stop());\r\n    streamRef.current = null;\r\n    analyserRef.current = null;\r\n    setInputLevelActive(false);\r\n    setInputLevel(0);\r\n  }, []);\r\n  useEffect(() => () => stopInputLevelMeter(), [stopInputLevelMeter]);\r\n\r\n  // Persist diagnostics open state to localStorage\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('phona-diagnostics-open', String(isDiagnosticsOpen));\r\n    } catch { /* ignore */ }\r\n  }, [isDiagnosticsOpen]);\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    try {\r\n      if (localStorage.getItem('phona-diagnostics-open') === 'true') setIsDiagnosticsOpen(true);\r\n    } catch { /* ignore */ }\r\n  }, []);\r\n\r\n  // Enumerate audio input devices (optional) - lists what browser detects\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || !navigator.mediaDevices?.enumerateDevices) return;\r\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\r\n      const inputs = devices.filter((d) => d.kind === 'audioinput').map((d) => d.label || d.deviceId.slice(0, 8));\r\n      setAudioDevices(inputs);\r\n    });\r\n  }, []);\r\n\r\n  // Browser support check: only run on client (typeof window)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const SpeechRecognition =\r\n      (window as unknown as { SpeechRecognition?: new () => SpeechRecognition }).SpeechRecognition ||\r\n      (window as unknown as { webkitSpeechRecognition?: new () => SpeechRecognition }).webkitSpeechRecognition;\r\n    if (SpeechRecognition) {\r\n      setSpeechSupport(true);\r\n      setSpeechStatus('idle');\r\n    } else {\r\n      setSpeechSupport(false);\r\n      setSpeechStatus('browser-unsupported');\r\n      setTargetedMessage('Browser unsupported (use desktop Edge/Chrome).');\r\n    }\r\n  }, []);\r\n\r\n  const speakPhona = useCallback(async (text: string) => {\r\n    setMessages((m) => [...m, { from: 'phona', text }]);\r\n    try {\r\n      const res = await fetch('/api/speak', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ text }),\r\n      });\r\n      if (res.ok) {\r\n        const blob = await res.blob();\r\n        const url = URL.createObjectURL(blob);\r\n        const audio = new Audio(url);\r\n        await new Promise<void>((resolve, reject) => {\r\n          audio.onended = () => {\r\n            URL.revokeObjectURL(url);\r\n            resolve();\r\n          };\r\n          audio.onerror = () => reject(new Error('Playback failed'));\r\n          audio.play();\r\n        });\r\n      }\r\n    } catch {\r\n      // Fallback: no audio\r\n    }\r\n  }, []);\r\n\r\n  const initialGreeting = useRef(false);\r\n  useEffect(() => {\r\n    if (initialGreeting.current) return;\r\n    initialGreeting.current = true;\r\n    speakPhona(\"Hello, I'm Phona. What can I call you?\");\r\n  }, [speakPhona]);\r\n\r\n  const handleNameSubmit = () => {\r\n    const n = name.trim() || 'there';\r\n    setName(n);\r\n    setMessages((m) => [...m, { from: 'user', text: n }]);\r\n    setStep('mode');\r\n    // speakPhona adds the message; avoid duplicate by not adding it again\r\n    speakPhona(\"Let's start off with some words for you to say.\");\r\n  };\r\n\r\n  const handleModeSelect = () => {\r\n    setMessages((m) => [...m, { from: 'user', text: 'Practice words' }]);\r\n    setStep('practice');\r\n    startSession();\r\n    setStep('word');\r\n  };\r\n\r\n  const startSession = async () => {\r\n    try {\r\n      const res = await fetch('/api/sessions/start', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: 'default' }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.sessionId) setSessionId(data.sessionId);\r\n    } catch (e) {\r\n      console.error('Session start failed', e);\r\n    }\r\n  };\r\n\r\n  const scoreAndAdvance = useCallback(\r\n    async (word: string, trans: string) => {\r\n      const res = await fetch('/api/practice/score', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          word,\r\n          transcript: trans,\r\n          sessionId: sessionId || undefined,\r\n          userId: 'default',\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      setLastScore({ accuracy: data.accuracy, syllables: data.syllables || [] });\r\n\r\n      if (data.accuracy >= 90) {\r\n        setFeedback('✅ Nice!');\r\n        await speakPhona('Nice!');\r\n        setLastScore(null);\r\n        setTranscript('');\r\n        if (currentWordIndex < PRACTICE_WORDS.length - 1) {\r\n          setCurrentWordIndex((i) => i + 1);\r\n          setTimeout(() => setFeedback(null), 1200);\r\n        } else {\r\n          setFeedback(\"You've completed all the words! Great job.\");\r\n          if (sessionId) {\r\n            await fetch('/api/sessions/end', {\r\n              method: 'POST',\r\n              headers: { 'Content-Type': 'application/json' },\r\n              body: JSON.stringify({ sessionId }),\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        const syll = (data.syllables || []).join(' - ');\r\n        const txt = `Almost! Let's try it in syllables: ${syll}`;\r\n        setFeedback(txt);\r\n        await speakPhona(txt);\r\n      }\r\n    },\r\n    [sessionId, currentWordIndex, speakPhona]\r\n  );\r\n\r\n  // Web Speech API: ONLY called from user button click. Client-only (guarded).\r\n  const startListening = useCallback(async () => {\r\n    if (typeof window === 'undefined' || !speechSupport) return;\r\n\r\n    setLastErrorCode(null);\r\n    setTargetedMessage(null);\r\n\r\n    // Microphone permission check (Permissions API - not all browsers support)\r\n    if (navigator.permissions?.query) {\r\n      try {\r\n        const perm = await navigator.permissions.query({ name: 'microphone' as PermissionName });\r\n        if (perm.state === 'denied') {\r\n          setSpeechStatus('mic-blocked');\r\n          setTargetedMessage('Mic blocked or recognition not triggered by a user gesture.');\r\n          return;\r\n        }\r\n      } catch {\r\n        // Permissions API may not support 'microphone' - continue anyway\r\n      }\r\n    }\r\n\r\n    const SpeechRecognition =\r\n      (window as unknown as { SpeechRecognition?: new () => SpeechRecognition }).SpeechRecognition ||\r\n      (window as unknown as { webkitSpeechRecognition?: new () => SpeechRecognition }).webkitSpeechRecognition;\r\n    if (!SpeechRecognition) {\r\n      setTargetedMessage('Browser unsupported (use desktop Edge/Chrome).');\r\n      return;\r\n    }\r\n\r\n    const rec = new SpeechRecognition();\r\n    rec.lang = 'en-US';\r\n    rec.interimResults = true;\r\n    rec.continuous = false;\r\n    rec.maxAlternatives = 3;\r\n\r\n    setTranscript('');\r\n    setFeedback(null);\r\n    setSpeechStatus('listening');\r\n    setRecState('Listening');\r\n\r\n    // ~5s timeout: if no onspeechstart, suggest mic/volume issue\r\n    speechStartTimeoutRef.current = setTimeout(() => {\r\n      setRecState((s) => {\r\n        if (s === 'Listening') {\r\n          setTargetedMessage('No speech detected. Try speaking right after you tap Speak, increase mic volume, or switch to a different microphone.');\r\n          setSpeechStatus('no-speech');\r\n          return 'Error';\r\n        }\r\n        return s;\r\n      });\r\n    }, 5000);\r\n\r\n    rec.onstart = () => {\r\n      addDebugEvent('onstart');\r\n      console.log('[SpeechRecognition] Listening started');\r\n    };\r\n    rec.onaudiostart = () => {\r\n      addDebugEvent('onaudiostart');\r\n      if (speechStartTimeoutRef.current) {\r\n        clearTimeout(speechStartTimeoutRef.current);\r\n        speechStartTimeoutRef.current = null;\r\n      }\r\n    };\r\n    rec.onspeechstart = () => {\r\n      addDebugEvent('onspeechstart');\r\n      if (speechStartTimeoutRef.current) {\r\n        clearTimeout(speechStartTimeoutRef.current);\r\n        speechStartTimeoutRef.current = null;\r\n      }\r\n      setRecState('Speech detected');\r\n    };\r\n    rec.onspeechend = () => {\r\n      addDebugEvent('onspeechend');\r\n    };\r\n    rec.onresult = (e: SpeechRecognitionEvent) => {\r\n      addDebugEvent('onresult');\r\n      if (!e.results.length) return;\r\n      // With interimResults, take the last final result\r\n      let text = '';\r\n      for (let i = e.results.length - 1; i >= 0; i--) {\r\n        if (e.results[i].isFinal) {\r\n          text = e.results[i][0]?.transcript?.trim() || '';\r\n          break;\r\n        }\r\n      }\r\n      if (!text) text = e.results[0][0]?.transcript?.trim() || '';\r\n      if (!text) return;\r\n      setTranscript(text);\r\n      setSpeechStatus('idle');\r\n      setRecState('Ended');\r\n      const word = PRACTICE_WORDS[currentWordIndex];\r\n      scoreAndAdvance(word, text);\r\n    };\r\n    rec.onend = () => {\r\n      addDebugEvent('onend');\r\n      if (speechStartTimeoutRef.current) {\r\n        clearTimeout(speechStartTimeoutRef.current);\r\n        speechStartTimeoutRef.current = null;\r\n      }\r\n      setIsListening(false);\r\n      recognitionRef.current = null;\r\n      setRecState((s) => (s === 'Listening' ? 'Ended' : s));\r\n      setSpeechStatus((s) => (s === 'listening' ? 'idle' : s));\r\n    };\r\n    rec.onerror = (e: Event & { error?: string }) => {\r\n      const err = (e as { error?: string }).error;\r\n      addDebugEvent(`onerror: ${err || 'unknown'}`);\r\n      setLastErrorCode(err || 'unknown');\r\n      console.error('[SpeechRecognition] Error:', err, (e as ErrorEvent).message || '');\r\n      setIsListening(false);\r\n      recognitionRef.current = null;\r\n      setRecState('Error');\r\n      if (err === 'not-allowed') {\r\n        setSpeechStatus('mic-blocked');\r\n        setTargetedMessage('Mic blocked or recognition not triggered by a user gesture.');\r\n      } else if (err === 'network' || err === 'service-not-allowed') {\r\n        setTargetedMessage('Speech recognition requires internet; firewall/VPN may block it.');\r\n      } else if (err === 'no-speech') {\r\n        setSpeechStatus('no-speech');\r\n        setTargetedMessage('No speech detected. Try speaking right after you tap Speak, increase mic volume, or switch to a different microphone.');\r\n      } else if (err !== 'aborted') {\r\n        setSpeechStatus('idle');\r\n        setTargetedMessage('Could not hear clearly. Try again.');\r\n      }\r\n    };\r\n\r\n    recognitionRef.current = rec;\r\n    // recognition.start() ONLY triggered by user click (this fn is button handler)\r\n    rec.start();\r\n    setIsListening(true);\r\n  }, [currentWordIndex, speechSupport, scoreAndAdvance, addDebugEvent]);\r\n\r\n  const stopListening = () => {\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n      recognitionRef.current = null;\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setLastScore(null);\r\n    setFeedback(null);\r\n    setTranscript('');\r\n    setSpeechStatus('idle');\r\n    startListening();\r\n  };\r\n\r\n  // Play word: browser TTS (speechSynthesis) - hear target word pronounced\r\n  const playWord = useCallback((word: string) => {\r\n    if (typeof window === 'undefined') return;\r\n    if (!window.speechSynthesis) {\r\n      setTtsFallback('Text-to-speech is not supported in this browser.');\r\n      return;\r\n    }\r\n    setTtsFallback(null);\r\n    window.speechSynthesis.cancel();\r\n    const u = new SpeechSynthesisUtterance(word);\r\n    u.lang = 'en-US';\r\n    u.rate = ttsRate === 'slow' ? 0.7 : 1;\r\n    const voices = window.speechSynthesis.getVoices();\r\n    const enVoice = voices.find((v) => v.lang.startsWith('en') && v.name.toLowerCase().includes('female'))\r\n      || voices.find((v) => v.lang.startsWith('en'))\r\n      || voices[0];\r\n    if (enVoice) u.voice = enVoice;\r\n    window.speechSynthesis.speak(u);\r\n  }, [ttsRate]);\r\n\r\n  // Load voices (Chrome needs this to populate getVoices)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || !window.speechSynthesis) return;\r\n    const load = () => window.speechSynthesis.getVoices();\r\n    load();\r\n    window.speechSynthesis.onvoiceschanged = load;\r\n  }, []);\r\n\r\n  const currentWord = PRACTICE_WORDS[currentWordIndex];\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <div className=\"phona-header\">\r\n          <Link href=\"/\" className=\"phona-back-link\">\r\n            ← Back to Home\r\n          </Link>\r\n          <Image src=\"/phoneticallylogo.png\" alt=\"Phonetically\" width={52} height={52} className=\"phona-header-logo\" />\r\n        </div>\r\n        <div className=\"content-wrapper max-w-2xl mx-auto w-full p-8\">\r\n\r\n          <div className={step === 'word' ? 'phona-fresh-container' : 'phona-chat'}>\r\n            {step !== 'word' && messages.map((msg, i) => (\r\n              <div\r\n                key={i}\r\n                className={`phona-message ${msg.from === 'phona' ? 'phona-message-bot' : 'phona-message-user'}`}\r\n              >\r\n                {msg.text}\r\n              </div>\r\n            ))}\r\n\r\n            {step === 'name' && (\r\n              <div className=\"phona-input-row\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Your name\"\r\n                  className=\"glass-input phona-input\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  onKeyDown={(e) => e.key === 'Enter' && handleNameSubmit()}\r\n                />\r\n                <button type=\"button\" onClick={handleNameSubmit} className=\"glass-button phona-send\">\r\n                  Send\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {step === 'mode' && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleModeSelect}\r\n                className=\"phona-option-okay\"\r\n              >\r\n                Okay\r\n              </button>\r\n            )}\r\n\r\n            {step === 'word' && currentWord && (\r\n              <div className=\"phona-fresh-view\">\r\n                <div className=\"phona-target-row\">\r\n                  <div className=\"phona-target-word-center\">{currentWord}</div>\r\n                  <div className=\"phona-play-row\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => playWord(currentWord)}\r\n                      className=\"glass-button phona-play-btn\"\r\n                      title=\"Hear the word\"\r\n                    >\r\n                      <Volume2 size={24} />\r\n                      Play\r\n                    </button>\r\n                    <div className=\"phona-rate-toggle\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setTtsRate('normal')}\r\n                        className={`phona-rate-btn ${ttsRate === 'normal' ? 'phona-rate-active' : ''}`}\r\n                      >\r\n                        Normal\r\n                      </button>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setTtsRate('slow')}\r\n                        className={`phona-rate-btn ${ttsRate === 'slow' ? 'phona-rate-active' : ''}`}\r\n                      >\r\n                        Slow\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {ttsFallback && <div className=\"phona-tts-fallback\">{ttsFallback}</div>}\r\n                {/* Visible status label for diagnostics */}\r\n                <div className=\"phona-status\" role=\"status\" aria-live=\"polite\">\r\n                  {feedback || transcript || (\r\n                    speechStatus === 'browser-unsupported'\r\n                      ? 'Speech recognition is not supported in this browser. Please use Chrome or Edge.'\r\n                      : speechStatus === 'mic-blocked'\r\n                        ? 'Microphone access is blocked. Please enable it in browser settings.'\r\n                        : speechStatus === 'no-speech'\r\n                          ? 'No speech detected'\r\n                          : speechStatus === 'listening'\r\n                            ? 'Listening...'\r\n                            : 'Idle'\r\n                  )}\r\n                </div>\r\n\r\n                {speechSupport !== false && (\r\n                  <>\r\n                    <div className=\"phona-speak-tip\">Tip: Tap Speak and start talking right away.</div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={isListening ? stopListening : startListening}\r\n                      className={`phona-mic-large ${isListening ? 'phona-mic-listening' : ''}`}\r\n                    >\r\n                      <Mic size={44} strokeWidth={2} />\r\n                      <span className=\"phona-mic-label\">Speak</span>\r\n                    </button>\r\n                  </>\r\n                )}\r\n\r\n                {lastScore && lastScore.accuracy < 90 && (\r\n                  <button type=\"button\" onClick={handleRetry} className=\"glass-button phona-retry\">\r\n                    Try again\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Floating Diagnostics: toggle button + expandable panel (only on practice step) */}\r\n            {step === 'word' && (\r\n              <div className=\"phona-diagnostics-float\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setIsDiagnosticsOpen((o) => !o)}\r\n                  className={`phona-diagnostics-toggle ${isDiagnosticsOpen ? 'phona-diagnostics-toggle-open' : ''}`}\r\n                >\r\n                  <Settings2 size={18} />\r\n                  Diagnostics\r\n                </button>\r\n                <div className={`phona-diagnostics-panel ${isDiagnosticsOpen ? 'phona-diagnostics-panel-open' : ''}`}>\r\n                  <div className=\"phona-diagnostics-header-row\">\r\n                    <span className=\"phona-diagnostics-header\">Speech Diagnostics</span>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setIsDiagnosticsOpen(false)}\r\n                      className=\"phona-diagnostics-close\"\r\n                      aria-label=\"Close\"\r\n                    >\r\n                      <X size={18} />\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"phona-diagnostics-body\">\r\n                    <div className=\"phona-diagnostic-row\">\r\n                      <button type=\"button\" onClick={runMicTest} className=\"glass-button phona-diagnostic-btn\">\r\n                        Mic Test\r\n                      </button>\r\n                      {micTestResult && <span className=\"phona-diagnostic-result\">{micTestResult}</span>}\r\n                    </div>\r\n                    <div className=\"phona-diagnostic-row\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={inputLevelActive ? stopInputLevelMeter : startInputLevelMeter}\r\n                        className=\"glass-button phona-diagnostic-btn\"\r\n                      >\r\n                        {inputLevelActive ? 'Stop Meter' : 'Input Level Meter'}\r\n                      </button>\r\n                      {inputLevelActive && (\r\n                        <>\r\n                          <div className=\"phona-level-bar\">\r\n                            <div className=\"phona-level-fill\" style={{ width: `${Math.min(100, inputLevel * 2)}%` }} />\r\n                          </div>\r\n                          <span className=\"phona-level-value\">{inputLevel}</span>\r\n                          {inputLevel < 5 && (\r\n                            <span className=\"phona-diagnostic-warn\">Mic not receiving audio—check input device.</span>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"phona-debug-panel\">\r\n                      <div className=\"phona-debug-row\">\r\n                        <span className=\"phona-debug-label\">Status:</span>\r\n                        <span className=\"phona-debug-value\">{recState}</span>\r\n                      </div>\r\n                      {lastErrorCode && (\r\n                        <div className=\"phona-debug-row\">\r\n                          <span className=\"phona-debug-label\">Last issue:</span>\r\n                          <span className=\"phona-debug-value phona-debug-error\">{lastErrorCode}</span>\r\n                        </div>\r\n                      )}\r\n                      {targetedMessage && <div className=\"phona-targeted-msg\">{targetedMessage}</div>}\r\n                      <div className=\"phona-debug-events\">\r\n                        {debugEvents.slice(-10).map((ev, i) => (\r\n                          <div key={i} className=\"phona-debug-event\">[{ev.t}] {ev.event}</div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"phona-device-guidance\">\r\n                      <strong>Mic selection:</strong> Edge address bar → lock icon → Site permissions → Microphone. Or Windows Settings → Sound → Input device.\r\n                      {audioDevices.length > 0 && (\r\n                        <div className=\"phona-device-list\">Detected inputs: {audioDevices.join(', ') || 'none'}</div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"phona-interpret-note\">\r\n                      <strong>How to interpret:</strong>\r\n                      <ul className=\"phona-interpret-list\">\r\n                        <li>Mic Test fails → microphone permissions or Windows privacy settings</li>\r\n                        <li>Meter moves but no speech events → SpeechRecognition service/network may be blocked</li>\r\n                        <li>Meter flat → wrong input device or muted mic</li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}